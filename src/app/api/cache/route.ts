import { createProvider } from "@/api/services/hackernews";
import { Story } from "@/api/services/hackernews/types";
import { createSummaryService } from "@/api/services/summary";

export const maxDuration = 60;
export const dynamic = "force-dynamic";

const STORY_CHUNK_SIZE = 4;

export async function GET(request: Request) {
  const authHeader = request.headers.get("authorization");
  if (authHeader !== `Bearer ${process.env.CRON_SECRET}`) {
    return new Response("Unauthorized", {
      status: 401,
    });
  }

  const provider = createProvider();
  const stories = await provider.getBestStories();

  const groups = stories.reduce((acc, story, index) => {
    if (index % STORY_CHUNK_SIZE === 0) acc.push([]);
    acc[acc.length - 1].push(story);
    return acc;
  }, [] as Story[][]);

  for (const group of groups) {
    const summaryRequests = group.map(async (story) => {
      const provider = createProvider();
      const summaryService = createSummaryService();
      const comments = await provider.getComments(story);
      return await summaryService.getSummary(story, comments);
    });

    await Promise.all(summaryRequests);
  }

  return new Response(JSON.stringify({ status: "ok" }));
}

// const mockStories = [
//   {
//     by: "ezekg",
//     descendants: 513,
//     id: 42725385,
//     kids: [
//       42728008, 42726831, 42730486, 42731796, 42726381, 42726526, 42730713,
//       42730383, 42730185, 42726453, 42726255, 42731108, 42727128, 42726643,
//       42733916, 42729861, 42731738, 42735510, 42728354, 42726792, 42731167,
//       42730069, 42729781, 42728116, 42728245, 42726630, 42728813, 42733755,
//       42728610, 42727446, 42730206, 42740220, 42728077, 42732114, 42730893,
//       42733769, 42732451, 42731199, 42731922, 42737769, 42728851, 42727088,
//       42731542, 42727861, 42729044, 42729175, 42727428, 42727299, 42727139,
//       42728189, 42726890, 42727051, 42733423, 42731604, 42726568, 42728127,
//       42726556, 42726662, 42735352, 42728706, 42731365, 42727800, 42736527,
//       42726650, 42730349, 42730023, 42729678, 42729661, 42730330, 42726536,
//       42740480, 42732625, 42738214, 42728222, 42734016, 42733159, 42727148,
//       42730078, 42728374, 42728496, 42726359, 42728944, 42728960, 42731574,
//       42729284, 42730406, 42730195, 42737151, 42728353, 42726627, 42731100,
//       42738292, 42726964, 42729617, 42727845, 42731439, 42731825, 42731098,
//       42727172, 42728302, 42730606, 42743184, 42742988, 42731295, 42731894,
//     ],
//     score: 1568,
//     time: 1737037051,
//     title: "No Calls",
//     type: "story",
//     url: "https://keygen.sh/blog/no-calls/",
//   },
//   {
//     by: "wut42",
//     descendants: 377,
//     id: 42728862,
//     kids: [
//       42729452, 42729130, 42729214, 42730156, 42729422, 42731150, 42729064,
//       42729515, 42729402, 42729065, 42729729, 42729137, 42729123, 42729230,
//       42730468, 42735015, 42730075, 42729366, 42732227, 42731124, 42731309,
//       42729900, 42729043, 42729756, 42729494, 42732915, 42730048, 42733279,
//       42729054, 42730746, 42731051, 42730674, 42730702, 42729696, 42732461,
//       42729005, 42734804, 42729501, 42733796, 42730009, 42729766, 42730138,
//       42732373, 42729053, 42734192, 42729178, 42732020, 42732906, 42730109,
//       42729841, 42731245, 42734867, 42729398, 42730319, 42734893, 42737645,
//       42729621, 42737360, 42729158, 42731007, 42729489, 42733604, 42733285,
//       42733622, 42729805, 42730808, 42737322, 42729320, 42729650, 42733684,
//       42737284, 42731911, 42730622, 42731261, 42729033, 42730577, 42729930,
//       42742386, 42728945, 42729109, 42729114, 42729017, 42730241, 42729200,
//       42729629, 42730555, 42733639, 42734294, 42729961, 42729252, 42730011,
//       42731437, 42731914, 42733365, 42731058, 42729587, 42730183, 42733292,
//       42730189, 42729330, 42729172, 42729307, 42730751, 42737070,
//     ],
//     score: 1174,
//     time: 1737051649,
//     title: "David Lynch has died",
//     type: "story",
//     url: "https://variety.com/2025/film/news/david-lynch-dead-director-blue-velvet-twin-peaks-1236276106/",
//   },
//   {
//     by: "mfiguiere",
//     descendants: 2405,
//     id: 42753396,
//     kids: [
//       42759678, 42755112, 42754721, 42755602, 42754640, 42754452, 42754760,
//       42753462, 42757767, 42754422, 42758000, 42755749, 42753480, 42753835,
//       42753471, 42755312, 42757818, 42753821, 42757512, 42759532, 42754615,
//       42754406, 42753491, 42755192, 42754241, 42756659, 42753455, 42758536,
//       42754369, 42753824, 42758142, 42756169, 42758480, 42754699, 42756274,
//       42753472, 42753680, 42758973, 42759684, 42755769, 42758513, 42754578,
//       42759210, 42753522, 42758349, 42758437, 42757832, 42759264, 42755029,
//       42754816, 42756129, 42753695, 42754524, 42753866, 42754750, 42753486,
//       42754879, 42759019, 42754370, 42757038, 42755863, 42753476, 42758820,
//       42753640, 42754795, 42755854, 42753847, 42754947, 42753727, 42758502,
//       42753532, 42753461, 42757741, 42757368, 42756080, 42755561, 42757770,
//       42756732, 42757238, 42753770, 42756419, 42754194, 42755197, 42754394,
//       42758777, 42755147, 42759563, 42759195, 42753549, 42759607, 42759407,
//       42757819, 42756403, 42754393, 42758707, 42754481, 42753805, 42759213,
//       42755326, 42757352, 42753736, 42757071, 42755143, 42755327, 42756811,
//       42756820, 42758047, 42757366, 42753439, 42759372, 42756292, 42758097,
//       42759530, 42756876, 42758825, 42757180, 42759403, 42755597, 42759394,
//       42753986, 42756503, 42754137, 42756946, 42754118, 42755229, 42753939,
//       42754657, 42758750, 42755337, 42754869, 42757657, 42759356, 42754536,
//       42753804, 42754077, 42759353, 42753812, 42756340, 42758843, 42754619,
//       42759562, 42759122, 42758663, 42758302, 42759074, 42757773, 42757306,
//       42756750, 42756516, 42754021, 42756092, 42755609, 42755563, 42754957,
//       42754441, 42753744, 42755013, 42758085, 42753623, 42753617, 42753540,
//       42759744, 42757006, 42759366, 42755386, 42757194, 42758588, 42754519,
//       42754976, 42756873, 42753428, 42756284, 42753427, 42753555, 42755352,
//       42755731, 42753426, 42753589, 42758685, 42754525, 42755427, 42761848,
//       42755743, 42757909, 42759616, 42756869, 42754820, 42753435, 42755973,
//       42754604, 42754039, 42756916, 42753487, 42757989, 42754169, 42753613,
//       42754002, 42756029, 42755223, 42754399, 42753605, 42753432, 42753830,
//       42758043, 42753650, 42753688,
//     ],
//     score: 1167,
//     time: 1737258709,
//     title: "TikTok goes dark in the US",
//     type: "story",
//     url: "https://techcrunch.com/2025/01/18/tiktok-goes-dark-in-the-u-s/",
//   },
//   {
//     by: "romanzipp",
//     descendants: 640,
//     id: 42735393,
//     kids: [
//       42735585, 42736564, 42735686, 42735612, 42735874, 42736197, 42735531,
//       42735636, 42736389, 42735540, 42736069, 42735811, 42735561, 42737610,
//       42735524, 42735610, 42735615, 42735529, 42735528, 42740529, 42737758,
//       42735912, 42736039, 42737658, 42737521, 42741035, 42735666, 42735609,
//       42740446, 42735673, 42735601, 42740210, 42737665, 42741687, 42740303,
//       42735733, 42736984, 42736045, 42735546, 42736817, 42735571, 42736827,
//       42735661, 42736426, 42735943, 42735685, 42737551, 42736549, 42735519,
//       42739929, 42736432, 42736320, 42735732, 42736689, 42741835, 42737091,
//       42735507, 42735535, 42735755, 42740461, 42735669, 42739158, 42745388,
//       42739817, 42737042, 42736556, 42743402, 42738401, 42736332, 42737621,
//       42737352, 42737969, 42735602, 42736641, 42735710, 42737800, 42735817,
//       42737752, 42737045, 42737251, 42735663, 42739583, 42736067, 42737338,
//       42735937, 42737311, 42736188, 42735576, 42736525, 42737668, 42735785,
//       42738141, 42744273, 42735646, 42736498,
//     ],
//     score: 1035,
//     time: 1737103845,
//     title: "Canon wants us to pay for using our own camera as a webcam",
//     type: "story",
//     url: "https://romanzipp.com/blog/no-you-cant-use-your-6299-canon-camera-as-a-webcam",
//   },
//   {
//     by: "fzliu",
//     descendants: 964,
//     id: 42707238,
//     kids: [
//       42721597, 42707907, 42718547, 42720935, 42720524, 42707857, 42718363,
//       42719197, 42722622, 42718839, 42723666, 42707995, 42723059, 42719575,
//       42708025, 42707803, 42707780, 42707804, 42707729, 42707888, 42717086,
//       42723413, 42707715, 42722049, 42719788, 42721289, 42721742, 42708034,
//       42723882, 42727226, 42708108, 42720300, 42719628, 42731523, 42731493,
//       42707751, 42723389, 42708373, 42707767, 42722306, 42718337, 42756853,
//       42718358, 42749057, 42724449, 42720185, 42724261, 42719286, 42718902,
//       42707675, 42719993, 42720943, 42707796, 42718895, 42722587, 42707648,
//       42720409, 42750252, 42749136, 42719885, 42741059, 42709671, 42719047,
//       42719914, 42708746, 42707716, 42721321, 42718159, 42719066, 42722300,
//       42723469, 42724654, 42726263, 42725238, 42720116, 42708477, 42720164,
//       42726764, 42722079, 42726908, 42720818, 42720124, 42707814, 42723496,
//       42723190, 42726735, 42707691, 42707754, 42723017, 42727721, 42731959,
//       42727670, 42721313, 42709556, 42708050, 42724784, 42724161, 42724351,
//       42725086, 42708215, 42707532, 42718040, 42707855, 42707719, 42723471,
//       42709842, 42707856, 42707745, 42722680, 42722114, 42725140, 42709841,
//       42722643, 42724151, 42707795, 42725621, 42717964, 42709768, 42725187,
//       42723974, 42708007, 42725887, 42723249, 42720725, 42718767, 42724748,
//       42718610, 42718623, 42720744, 42721246, 42726477, 42718319, 42723972,
//       42720108, 42725733, 42724549, 42721382, 42721725, 42723836, 42725081,
//       42719579, 42718799, 42707725, 42723157, 42720563, 42721240, 42720872,
//       42724550, 42727054, 42720567, 42724687, 42708104, 42708356, 42724817,
//       42708817, 42718116, 42710624, 42727078, 42707981, 42722923, 42707908,
//       42725658, 42726835, 42719782, 42710970, 42723180, 42722998, 42707964,
//       42720592, 42707910, 42721803, 42718609, 42724979, 42719463, 42721445,
//       42724368, 42724557, 42726968, 42719795, 42707997, 42707996, 42718141,
//       42727254, 42722896, 42718825, 42718687, 42727557, 42720777, 42729768,
//       42724661, 42719738, 42719028, 42722683, 42724275, 42723764, 42707867,
//       42707987, 42727092, 42721389, 42727258, 42721659, 42724629, 42707773,
//       42708459, 42707752, 42723484, 42718448, 42727163, 42724907, 42707899,
//       42721341, 42723241, 42723143, 42707631, 42721493, 42733005, 42707842,
//       42718854, 42720459, 42727151, 42707666, 42719830, 42708037, 42721181,
//       42728523, 42707776,
//     ],
//     score: 1033,
//     time: 1736914543,
//     title: "Nobody cares",
//     type: "story",
//     url: "https://grantslatton.com/nobody-cares",
//   },
//   {
//     by: "kjhughes",
//     descendants: 2539,
//     id: 42738464,
//     kids: [
//       42739182, 42742292, 42741618, 42739868, 42743253, 42742149, 42738908,
//       42738712, 42739650, 42744723, 42738557, 42739342, 42738690, 42741787,
//       42738511, 42742053, 42738705, 42739604, 42741839, 42740898, 42748838,
//       42738648, 42743938, 42738474, 42738581, 42738822, 42740224, 42744875,
//       42742421, 42741740, 42741173, 42741967, 42744911, 42742089, 42742737,
//       42751136, 42742883, 42752939, 42743411, 42740601, 42738532, 42739395,
//       42739202, 42745207, 42741570, 42742616, 42747765, 42747470, 42746800,
//       42740713, 42741785, 42739226, 42744861, 42742190, 42739423, 42747907,
//       42738764, 42739556, 42746832, 42739037, 42740138, 42745735, 42739679,
//       42738839, 42740922, 42740287, 42747399, 42739374, 42738995, 42747605,
//       42741563, 42744068, 42752056, 42741114, 42740332, 42741416, 42746542,
//       42749103, 42745679, 42742355, 42740675, 42739897, 42742464, 42739063,
//       42739800, 42742984, 42748482, 42740331, 42740847, 42738662, 42741277,
//       42739795, 42741645, 42738594, 42740443, 42741860, 42739835, 42741334,
//       42738590, 42739247, 42738802, 42747708, 42749462, 42742816, 42739183,
//       42738754, 42749233, 42740687, 42742433, 42742086, 42742788, 42741521,
//       42740143, 42741250, 42739419, 42739111, 42739327, 42744940, 42742199,
//       42743283, 42738496, 42738946, 42738916, 42739717, 42738706, 42738588,
//       42739722, 42740124, 42738580, 42740528, 42745197, 42740657, 42738499,
//       42740823, 42741711, 42738708, 42739634, 42738778, 42741626, 42739723,
//       42739200, 42740464, 42739465, 42739953, 42743071, 42739495, 42738515,
//       42740496, 42738536, 42739718, 42739347, 42739774, 42739057, 42744490,
//     ],
//     score: 953,
//     time: 1737127438,
//     title: "Supreme Court upholds TikTok ban, but Trump might offer lifeline",
//     type: "story",
//     url: "https://www.cnbc.com/2025/01/17/supreme-court-rules-to-uphold-tiktok-ban.html",
//   },
//   {
//     by: "piyushsthr",
//     descendants: 246,
//     id: 42695547,
//     kids: [
//       42704234, 42704383, 42705646, 42709817, 42704624, 42704581, 42705692,
//       42706973, 42704852, 42710563, 42708187, 42705031, 42709999, 42712363,
//       42740966, 42705161, 42704228, 42708152, 42704493, 42706540, 42708905,
//       42732427, 42707432, 42706957, 42706027, 42704807, 42704357, 42709718,
//       42718966, 42706095, 42708057, 42707481, 42707913, 42709624, 42705670,
//       42706659, 42707015, 42709294, 42711436, 42708009, 42709449, 42704764,
//     ],
//     score: 894,
//     time: 1736848695,
//     title: "FFmpeg by Example",
//     type: "story",
//     url: "https://ffmpegbyexample.com/",
//   },
//   {
//     by: "meetpateltech",
//     descendants: 250,
//     id: 42768072,
//     kids: [
//       42768827, 42769222, 42773052, 42768789, 42768536, 42768537, 42772432,
//       42768546, 42772971, 42772954, 42768987, 42768547, 42768629, 42769087,
//       42772326, 42770347, 42769049, 42769326, 42768551, 42771932, 42772488,
//       42769509, 42769954, 42772598, 42768768, 42768932, 42769175, 42770627,
//       42769588, 42768565, 42772490, 42768956, 42770639, 42768922, 42769515,
//       42769831, 42772240, 42772042, 42770240, 42768819, 42768895, 42769788,
//     ],
//     score: 790,
//     time: 1737376678,
//     title: "DeepSeek-R1",
//     type: "story",
//     url: "https://github.com/deepseek-ai/DeepSeek-R1",
//   },
//   {
//     by: "HelloUsername",
//     descendants: 965,
//     id: 42724621,
//     kids: [
//       42725322, 42726018, 42725103, 42730318, 42724831, 42726760, 42724805,
//       42724951, 42725431, 42724963, 42724886, 42725226, 42724913, 42726693,
//       42727433, 42724940, 42725342, 42729034, 42725360, 42725039, 42724995,
//       42728849, 42725422, 42726631, 42726071, 42724828, 42725471, 42725594,
//       42724843, 42728248, 42729907, 42725515, 42726464, 42726295, 42726308,
//       42725805, 42725984, 42725263, 42729892, 42725117, 42725864, 42725069,
//       42724873, 42725410, 42725250, 42726330, 42725683, 42728052, 42725442,
//       42724858, 42731733, 42725191, 42726034, 42729244, 42729067, 42725157,
//       42727259, 42725464, 42725781, 42726006, 42728736, 42725404, 42725960,
//       42728115, 42727881, 42727013, 42726686, 42725628, 42730172, 42730296,
//       42724816, 42724809, 42724967, 42727823, 42728456, 42729357, 42731915,
//       42724797, 42726565, 42729021, 42731808, 42726064, 42733450, 42724990,
//       42724983, 42725172, 42732201, 42726362, 42725024, 42732222, 42726135,
//       42725217, 42735196, 42728200, 42725211, 42725865, 42724821, 42726855,
//       42726732, 42726546, 42729093, 42724836, 42733707, 42726309, 42725584,
//     ],
//     score: 772,
//     time: 1737032894,
//     title: "Nintendo announces the Switch 2 [video]",
//     type: "story",
//     url: "https://www.youtube.com/watch?v=itpcsQQvgAQ",
//   },
//   {
//     by: "toomuchtodo",
//     descendants: 414,
//     id: 42717234,
//     kids: [
//       42719422, 42719807, 42718978, 42719762, 42718540, 42718389, 42718869,
//       42719937, 42718789, 42719042, 42717511, 42724422, 42719921, 42719231,
//       42722742, 42721539, 42720334, 42719733, 42719592, 42723392, 42719843,
//       42725015, 42718370, 42720789, 42718747, 42720395, 42723689, 42723401,
//       42722022, 42722270, 42722007, 42722271, 42718270, 42720104, 42720107,
//       42723665, 42720776, 42720240,
//     ],
//     score: 761,
//     time: 1736976235,
//     title: "I have made the decision to disband Hindenburg Research",
//     type: "story",
//     url: "https://hindenburgresearch.com/gratitude/",
//   },
//   {
//     by: "Leary",
//     descendants: 2357,
//     id: 42759336,
//     kids: [
//       42770582, 42759704, 42767322, 42765939, 42760652, 42759497, 42760480,
//       42768992, 42765137, 42760092, 42759785, 42761581, 42762017, 42759690,
//       42760071, 42770597, 42762483, 42759677, 42759773, 42759509, 42764584,
//       42759967, 42761370, 42768877, 42760450, 42762910, 42760336, 42770362,
//       42761120, 42767939, 42761195, 42762881, 42760885, 42761691, 42764404,
//       42766066, 42762249, 42760326, 42760172, 42771371, 42760159, 42762408,
//       42763680, 42760296, 42766223, 42765444, 42768314, 42760135, 42762680,
//       42760390, 42760002, 42763944, 42759961, 42759639, 42760890, 42761639,
//       42761977, 42765745, 42766783, 42760656, 42761276, 42765133, 42759434,
//       42762563, 42760265, 42762245, 42760878, 42760425, 42760257, 42761580,
//       42763158, 42765498, 42759755, 42761998, 42761736, 42762766, 42763016,
//       42768519, 42764257, 42759786, 42764920, 42759587, 42762493, 42761888,
//       42762101, 42760016, 42762584, 42759465, 42760775, 42766092, 42759930,
//       42760494, 42759488, 42759803, 42759843, 42765982, 42768327, 42761179,
//       42759941, 42760930, 42761355, 42760180, 42760711, 42761014, 42761270,
//       42759936, 42768286, 42761107, 42762883, 42761589, 42761500, 42762277,
//       42761661, 42761076, 42759917, 42761165, 42759453, 42764375, 42762122,
//       42763064, 42762466, 42759518, 42762306, 42764724, 42761343, 42760515,
//       42760412, 42760353, 42762606, 42765276, 42762188, 42761897, 42760897,
//       42761086, 42760201, 42759502, 42760358, 42763140, 42761960, 42766919,
//       42759776, 42759739, 42759556, 42759564, 42759388, 42759915, 42759431,
//       42760624, 42759748, 42759514, 42759790, 42763332, 42763520,
//     ],
//     score: 725,
//     time: 1737308564,
//     title: "TikTok says it is restoring service for U.S. users",
//     type: "story",
//     url: "https://www.nbcnews.com/tech/tech-news/tiktok-says-restoring-service-us-users-rcna188320",
//   },
//   {
//     by: "DearNarwhal",
//     descendants: 273,
//     id: 42724284,
//     kids: [
//       42729542, 42731367, 42727440, 42730158, 42729058, 42728056, 42728437,
//       42726189, 42727283, 42730129, 42726478, 42726978, 42726757, 42727552,
//       42729166, 42727878, 42728095, 42727849, 42738458, 42731130, 42732448,
//       42727587, 42726759, 42730146, 42727908, 42726141, 42737475, 42734088,
//       42750679, 42727025, 42737601, 42728032, 42729001, 42728009, 42729145,
//       42730359, 42726725, 42728400, 42732703, 42727747, 42734865, 42742549,
//       42732898, 42727880, 42730826, 42730778, 42727814, 42726986, 42733919,
//       42746722, 42731899, 42727943, 42734845, 42728254, 42733152, 42730588,
//       42726634, 42731004, 42735040, 42729024, 42734017, 42728764, 42730182,
//       42729990, 42731705, 42729390, 42740658, 42736753, 42728143, 42735203,
//       42727261, 42747983, 42728660, 42731639, 42733771, 42728883, 42728971,
//       42736248, 42733817, 42733590, 42733211, 42735518, 42730611, 42730074,
//       42731076, 42731120, 42728887, 42731728, 42731546, 42734531, 42727962,
//       42727855, 42740145, 42733703,
//     ],
//     score: 717,
//     time: 1737029912,
//     title: "I ditched the algorithm for RSS",
//     type: "story",
//     url: "https://joeyehand.com/blog/2025/01/15/i-ditched-the-algorithm-for-rssand-you-should-too/",
//   },
//   {
//     by: "xnhbx",
//     descendants: 1779,
//     id: 42710339,
//     kids: [
//       42711015, 42710557, 42710757, 42716426, 42717191, 42711397, 42711633,
//       42712854, 42715045, 42716411, 42710628, 42723559, 42710553, 42712906,
//       42711674, 42713951, 42724541, 42714720, 42710798, 42712525, 42716470,
//       42713179, 42711544, 42714952, 42722897, 42715886, 42713046, 42710640,
//       42711459, 42722173, 42712514, 42712124, 42719357, 42722941, 42712243,
//       42712292, 42722000, 42716138, 42714575, 42719145, 42721833, 42742872,
//       42716655, 42712946, 42715952, 42716506, 42710642, 42715483, 42719298,
//       42718737, 42715564, 42711170, 42710902, 42722087, 42711510, 42722043,
//       42713722, 42716624, 42714099, 42710571, 42722992, 42710716, 42711074,
//       42721135, 42724058, 42716366, 42711769, 42718447, 42711464, 42712238,
//       42719959, 42714480, 42716588, 42714489, 42714905, 42711192, 42720745,
//       42721851, 42711019, 42723203, 42711286, 42718531, 42713529, 42710668,
//       42717010, 42710618, 42711525, 42712591, 42711932, 42714743, 42718714,
//       42710548, 42710534, 42720761, 42722560, 42718514, 42715889, 42718097,
//       42710570, 42710663, 42714010, 42710761,
//     ],
//     score: 682,
//     time: 1736945851,
//     title: "TikTok preparing for U.S. shut-off on Sunday",
//     type: "story",
//     url: "https://www.reuters.com/technology/tiktok-preparing-us-shut-off-sunday-information-reports-2025-01-15/",
//   },
//   {
//     by: "blendergeek",
//     descendants: 261,
//     id: 42725147,
//     kids: [
//       42726827, 42729663, 42726337, 42736207, 42727158, 42727510, 42725651,
//       42725964, 42737468, 42730955, 42733081, 42726825, 42725460, 42730154,
//       42732402, 42726512, 42735490, 42727683, 42726324, 42727584, 42726472,
//       42734829, 42729866, 42730508, 42736388, 42728867, 42728067, 42734719,
//       42727038, 42741789, 42728028, 42733785, 42733718, 42745331, 42743063,
//       42738110, 42726888, 42734980, 42734326, 42727996, 42739766, 42727241,
//       42727751, 42739126, 42726774, 42726607, 42734725, 42733130, 42725810,
//       42726591,
//     ],
//     score: 672,
//     time: 1737035863,
//     title: "Nepenthes is a tarpit to catch AI web crawlers",
//     type: "story",
//     url: "https://zadzmo.org/code/nepenthes/",
//   },
//   {
//     by: "chinathrow",
//     descendants: 719,
//     id: 42731091,
//     kids: [
//       42732041, 42731872, 42736458, 42731863, 42733791, 42731607, 42735662,
//       42733038, 42731396, 42731851, 42731862, 42732699, 42735060, 42765955,
//       42731328, 42731334, 42732164, 42731826, 42731266, 42731968, 42731864,
//       42739270, 42732535, 42741052, 42737110, 42733378, 42731957, 42731961,
//       42742298, 42738509, 42732056, 42733906, 42732784, 42732063, 42735225,
//       42732026, 42731858, 42739466, 42744166, 42731852, 42731271, 42732177,
//       42736247, 42732583, 42732220, 42731194, 42742572, 42731913, 42733316,
//       42732538, 42740951, 42731882, 42737495, 42733934, 42733013, 42734966,
//       42733269, 42732520, 42732612, 42736707, 42732518, 42734640, 42731956,
//       42737612, 42733078, 42731940,
//     ],
//     score: 668,
//     time: 1737062724,
//     title: "Starship Flight 7",
//     type: "story",
//     url: "https://www.spacex.com/launches/mission/?missionId=starship-flight-7?submit",
//   },
//   {
//     by: "mariuz",
//     descendants: 323,
//     id: 42763095,
//     kids: [
//       42764902, 42764699, 42763977, 42767556, 42763321, 42766352, 42763757,
//       42763398, 42768674, 42770472, 42769782, 42764806, 42763377, 42767932,
//       42766854, 42764389, 42764823, 42768585, 42764276, 42765006, 42763674,
//       42763381, 42767487, 42769541, 42765668, 42763540, 42771363, 42763560,
//       42766243, 42767597, 42764667, 42763787, 42768731, 42769149, 42766614,
//       42765124, 42766120, 42763907, 42765626, 42765263, 42766969, 42764220,
//       42765188, 42763389, 42767724, 42766288, 42764513, 42765950, 42765573,
//       42765893, 42764484, 42763897, 42765249, 42764549, 42764413, 42769547,
//       42765736, 42765167, 42765434, 42764031, 42765110, 42769886, 42763394,
//       42763988, 42769322, 42769872, 42764456, 42768426,
//     ],
//     score: 667,
//     time: 1737328282,
//     title: "It's time to make computing personal again",
//     type: "story",
//     url: "https://www.vintagecomputing.com/index.php/archives/3292/the-pc-is-dead-its-time-to-make-computing-personal-again",
//   },
// ];
